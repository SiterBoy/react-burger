{"ast":null,"code":"import React,{useState}from'react';import{Link}from'react-router-dom';import{Button,Input}from'@ya.praktikum/react-developer-burger-ui-components';import styles from'./auth-pages.module.css';import{request}from'../utils/api';import{useForm}from'../store/hooks';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ResetPasswordPage=()=>{const{values,handleChange}=useForm({password:'',code:''});const[loading,setLoading]=useState(false);const[success,setSuccess]=useState(false);const[error,setError]=useState(null);const handleSubmit=async e=>{e.preventDefault();setLoading(true);setError(null);setSuccess(false);try{const data=await request('/password-reset/reset',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({password:values.password,token:values.code})});if(data.success){setSuccess(true);localStorage.removeItem('canReset');}else{setError(data.message||'Ошибка сброса пароля');}}catch(err){const errorMessage=err instanceof Error?err.message:'Unknown error';console.error('Ошибка сброса пароля:',errorMessage);setError(errorMessage);}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:styles.container,children:[/*#__PURE__*/_jsx(\"h1\",{className:styles.title,children:\"\\u0412\\u043E\\u0441\\u0441\\u0442\\u0430\\u043D\\u043E\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044F\"}),success?/*#__PURE__*/_jsx(\"div\",{style:{color:'green',textAlign:'center',marginBottom:24},children:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C \\u0443\\u0441\\u043F\\u0435\\u0448\\u043D\\u043E \\u0438\\u0437\\u043C\\u0435\\u043D\\u0451\\u043D\"}):/*#__PURE__*/_jsxs(\"form\",{className:styles.form,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(Input,{type:\"password\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043D\\u043E\\u0432\\u044B\\u0439 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\",name:\"password\",value:values.password,onChange:handleChange,required:true,onPointerEnterCapture:undefined,onPointerLeaveCapture:undefined}),/*#__PURE__*/_jsx(Input,{type:\"text\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043A\\u043E\\u0434 \\u0438\\u0437 \\u043F\\u0438\\u0441\\u044C\\u043C\\u0430\",name:\"code\",value:values.code,onChange:handleChange,required:true,onPointerEnterCapture:undefined,onPointerLeaveCapture:undefined}),/*#__PURE__*/_jsx(Button,{type:\"primary\",size:\"medium\",htmlType:\"submit\",disabled:loading,children:loading?'Сохранение...':'Сохранить'}),error&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red',marginTop:16},children:error})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.links,children:/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0412\\u0441\\u043F\\u043E\\u043C\\u043D\\u0438\\u043B\\u0438 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C?\",' ',/*#__PURE__*/_jsx(Link,{to:\"/login\",className:styles.link,children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"})]})})]});};export default ResetPasswordPage;","map":{"version":3,"names":["React","useState","Link","Button","Input","styles","request","useForm","jsx","_jsx","jsxs","_jsxs","ResetPasswordPage","values","handleChange","password","code","loading","setLoading","success","setSuccess","error","setError","handleSubmit","e","preventDefault","data","method","headers","body","JSON","stringify","token","localStorage","removeItem","message","err","errorMessage","Error","console","className","container","children","title","style","color","textAlign","marginBottom","form","onSubmit","type","placeholder","name","value","onChange","required","onPointerEnterCapture","undefined","onPointerLeaveCapture","size","htmlType","disabled","marginTop","links","to","link"],"sources":["/Users/antonkaliberov/Desktop/Обучение реакт/Спринт 1 /react-burger/src/pages/reset-password-page.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport {\n  Button,\n  Input,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport styles from './auth-pages.module.css';\nimport { request } from '../utils/api';\nimport { useForm } from '../store/hooks';\n\nconst ResetPasswordPage: React.FC = () => {\n  const { values, handleChange } = useForm({\n    password: '',\n    code: '',\n  });\n  const [loading, setLoading] = useState(false);\n  const [success, setSuccess] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n    setSuccess(false);\n    try {\n      const data: { success: boolean; message?: string } = await request(\n        '/password-reset/reset',\n        {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({\n            password: values.password,\n            token: values.code,\n          }),\n        }\n      );\n      if (data.success) {\n        setSuccess(true);\n        localStorage.removeItem('canReset');\n      } else {\n        setError(data.message || 'Ошибка сброса пароля');\n      }\n    } catch (err: unknown) {\n      const errorMessage = err instanceof Error ? err.message : 'Unknown error';\n      console.error('Ошибка сброса пароля:', errorMessage);\n      setError(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className={styles.container}>\n      <h1 className={styles.title}>Восстановление пароля</h1>\n      {success ? (\n        <div style={{ color: 'green', textAlign: 'center', marginBottom: 24 }}>\n          Пароль успешно изменён\n        </div>\n      ) : (\n        <form className={styles.form} onSubmit={handleSubmit}>\n          <Input\n            type='password'\n            placeholder='Введите новый пароль'\n            name='password'\n            value={values.password}\n            onChange={handleChange}\n            required\n            onPointerEnterCapture={undefined}\n            onPointerLeaveCapture={undefined}\n          />\n          <Input\n            type='text'\n            placeholder='Введите код из письма'\n            name='code'\n            value={values.code}\n            onChange={handleChange}\n            required\n            onPointerEnterCapture={undefined}\n            onPointerLeaveCapture={undefined}\n          />\n          <Button\n            type='primary'\n            size='medium'\n            htmlType='submit'\n            disabled={loading}\n          >\n            {loading ? 'Сохранение...' : 'Сохранить'}\n          </Button>\n          {error && <div style={{ color: 'red', marginTop: 16 }}>{error}</div>}\n        </form>\n      )}\n      <div className={styles.links}>\n        <p>\n          Вспомнили пароль?{' '}\n          <Link to='/login' className={styles.link}>\n            Войти\n          </Link>\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default ResetPasswordPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}