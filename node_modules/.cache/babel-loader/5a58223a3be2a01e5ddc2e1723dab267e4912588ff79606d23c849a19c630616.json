{"ast":null,"code":"const BASE_URL='https://norma.nomoreparties.space/api';export const request=async function(endpoint){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};const accessToken=localStorage.getItem('accessToken');const headers={'Content-Type':'application/json',...(options.headers||{})};// Добавляем authorization только если токен существует\nif(accessToken){headers.authorization=`Bearer ${accessToken}`;}const response=await fetch(`${BASE_URL}${endpoint}`,{...options,headers});if(!response.ok){const error=await response.json();throw new Error(error.message||'Что-то пошло не так');}return response.json();};","map":{"version":3,"names":["BASE_URL","request","endpoint","options","arguments","length","undefined","accessToken","localStorage","getItem","headers","authorization","response","fetch","ok","error","json","Error","message"],"sources":["/Users/antonkaliberov/Desktop/Обучение реакт/Спринт 1 /react-burger/src/utils/api.ts"],"sourcesContent":["const BASE_URL = 'https://norma.nomoreparties.space/api';\n\ninterface RequestOptions extends RequestInit {\n  headers?: HeadersInit;\n}\n\nexport const request = async <T>(\n  endpoint: string,\n  options: RequestOptions = {}\n): Promise<T> => {\n  const accessToken = localStorage.getItem('accessToken');\n\n  const headers: Record<string, string> = {\n    'Content-Type': 'application/json',\n    ...((options.headers as Record<string, string>) || {}),\n  };\n\n  // Добавляем authorization только если токен существует\n  if (accessToken) {\n    headers.authorization = `Bearer ${accessToken}`;\n  }\n\n  const response = await fetch(`${BASE_URL}${endpoint}`, {\n    ...options,\n    headers,\n  });\n\n  if (!response.ok) {\n    const error = await response.json();\n    throw new Error(error.message || 'Что-то пошло не так');\n  }\n\n  return response.json();\n};\n"],"mappings":"AAAA,KAAM,CAAAA,QAAQ,CAAG,uCAAuC,CAMxD,MAAO,MAAM,CAAAC,OAAO,CAAG,cAAAA,CACrBC,QAAgB,CAED,IADf,CAAAC,OAAuB,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,CAAC,CAAC,CAE5B,KAAM,CAAAG,WAAW,CAAGC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC,CAEvD,KAAM,CAAAC,OAA+B,CAAG,CACtC,cAAc,CAAE,kBAAkB,CAClC,IAAKP,OAAO,CAACO,OAAO,EAA+B,CAAC,CAAC,CACvD,CAAC,CAED;AACA,GAAIH,WAAW,CAAE,CACfG,OAAO,CAACC,aAAa,CAAG,UAAUJ,WAAW,EAAE,CACjD,CAEA,KAAM,CAAAK,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,GAAGb,QAAQ,GAAGE,QAAQ,EAAE,CAAE,CACrD,GAAGC,OAAO,CACVO,OACF,CAAC,CAAC,CAEF,GAAI,CAACE,QAAQ,CAACE,EAAE,CAAE,CAChB,KAAM,CAAAC,KAAK,CAAG,KAAM,CAAAH,QAAQ,CAACI,IAAI,CAAC,CAAC,CACnC,KAAM,IAAI,CAAAC,KAAK,CAACF,KAAK,CAACG,OAAO,EAAI,qBAAqB,CAAC,CACzD,CAEA,MAAO,CAAAN,QAAQ,CAACI,IAAI,CAAC,CAAC,CACxB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}