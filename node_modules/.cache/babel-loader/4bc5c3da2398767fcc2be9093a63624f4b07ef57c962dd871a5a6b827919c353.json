{"ast":null,"code":"import React,{useEffect}from'react';import{Link,useNavigate,useLocation}from'react-router-dom';import{Button,Input}from'@ya.praktikum/react-developer-burger-ui-components';import{useAppDispatch,useAppSelector,useForm}from'../store/hooks';import{loginUser}from'../store/slices/user-slice';import styles from'./auth-pages.module.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LoginPage=()=>{const dispatch=useAppDispatch();const navigate=useNavigate();const location=useLocation();const{isAuth,loading,error}=useAppSelector(state=>state.user);const{values,handleChange}=useForm({email:'',password:''});useEffect(()=>{if(isAuth){var _location$state,_location$state$from;const from=((_location$state=location.state)===null||_location$state===void 0?void 0:(_location$state$from=_location$state.from)===null||_location$state$from===void 0?void 0:_location$state$from.pathname)||'/';navigate(from,{replace:true});}},[isAuth,navigate,location]);const handleSubmit=async e=>{e.preventDefault();try{await dispatch(loginUser(values)).unwrap();}catch(error){console.error('Ошибка входа:',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:styles.container,children:[/*#__PURE__*/_jsx(\"h1\",{className:styles.title,children:\"\\u0412\\u0445\\u043E\\u0434\"}),/*#__PURE__*/_jsxs(\"form\",{className:styles.form,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(Input,{type:\"email\",placeholder:\"E-mail\",name:\"email\",value:values.email,onChange:handleChange,required:true,onPointerEnterCapture:undefined,onPointerLeaveCapture:undefined}),/*#__PURE__*/_jsx(Input,{type:\"password\",placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",name:\"password\",value:values.password,onChange:handleChange,required:true,onPointerEnterCapture:undefined,onPointerLeaveCapture:undefined}),error&&/*#__PURE__*/_jsx(\"p\",{className:styles.error,children:error}),/*#__PURE__*/_jsx(Button,{type:\"primary\",size:\"medium\",htmlType:\"submit\",disabled:loading,children:loading?'Вход...':'Войти'})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.links,children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0412\\u044B \\u2014 \\u043D\\u043E\\u0432\\u044B\\u0439 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C?\",' ',/*#__PURE__*/_jsx(Link,{to:\"/register\",className:styles.link,children:\"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0417\\u0430\\u0431\\u044B\\u043B\\u0438 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C?\",' ',/*#__PURE__*/_jsx(Link,{to:\"/forgot-password\",className:styles.link,children:\"\\u0412\\u043E\\u0441\\u0441\\u0442\\u0430\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"})]})]})]});};export default LoginPage;","map":{"version":3,"names":["React","useEffect","Link","useNavigate","useLocation","Button","Input","useAppDispatch","useAppSelector","useForm","loginUser","styles","jsx","_jsx","jsxs","_jsxs","LoginPage","dispatch","navigate","location","isAuth","loading","error","state","user","values","handleChange","email","password","_location$state","_location$state$from","from","pathname","replace","handleSubmit","e","preventDefault","unwrap","console","className","container","children","title","form","onSubmit","type","placeholder","name","value","onChange","required","onPointerEnterCapture","undefined","onPointerLeaveCapture","size","htmlType","disabled","links","to","link"],"sources":["/Users/antonkaliberov/Desktop/Обучение реакт/Спринт 1 /react-burger/src/pages/login-page.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\nimport {\n  Button,\n  Input,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport { useAppDispatch, useAppSelector, useForm } from '../store/hooks';\nimport { loginUser } from '../store/slices/user-slice';\nimport { RootState } from '../store/types';\nimport styles from './auth-pages.module.css';\n\nconst LoginPage: React.FC = () => {\n  const dispatch = useAppDispatch();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { isAuth, loading, error } = useAppSelector(\n    (state: RootState) => state.user\n  );\n\n  const { values, handleChange } = useForm({\n    email: '',\n    password: '',\n  });\n\n  useEffect(() => {\n    if (isAuth) {\n      const from = location.state?.from?.pathname || '/';\n      navigate(from, { replace: true });\n    }\n  }, [isAuth, navigate, location]);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    try {\n      await dispatch(loginUser(values)).unwrap();\n    } catch (error) {\n      console.error('Ошибка входа:', error);\n    }\n  };\n\n  return (\n    <div className={styles.container}>\n      <h1 className={styles.title}>Вход</h1>\n      <form className={styles.form} onSubmit={handleSubmit}>\n        <Input\n          type='email'\n          placeholder='E-mail'\n          name='email'\n          value={values.email}\n          onChange={handleChange}\n          required\n          onPointerEnterCapture={undefined}\n          onPointerLeaveCapture={undefined}\n        />\n        <Input\n          type='password'\n          placeholder='Пароль'\n          name='password'\n          value={values.password}\n          onChange={handleChange}\n          required\n          onPointerEnterCapture={undefined}\n          onPointerLeaveCapture={undefined}\n        />\n        {error && <p className={styles.error}>{error}</p>}\n        <Button\n          type='primary'\n          size='medium'\n          htmlType='submit'\n          disabled={loading}\n        >\n          {loading ? 'Вход...' : 'Войти'}\n        </Button>\n      </form>\n      <div className={styles.links}>\n        <p>\n          Вы — новый пользователь?{' '}\n          <Link to='/register' className={styles.link}>\n            Зарегистрироваться\n          </Link>\n        </p>\n        <p>\n          Забыли пароль?{' '}\n          <Link to='/forgot-password' className={styles.link}>\n            Восстановить пароль\n          </Link>\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default LoginPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}