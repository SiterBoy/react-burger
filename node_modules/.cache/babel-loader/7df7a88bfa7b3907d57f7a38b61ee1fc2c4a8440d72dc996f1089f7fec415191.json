{"ast":null,"code":"import React,{useState}from'react';import{Link,useNavigate}from'react-router-dom';import{Button,Input}from'@ya.praktikum/react-developer-burger-ui-components';import styles from'./auth-pages.module.css';import{request}from'../utils/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ForgotPasswordPage=()=>{const navigate=useNavigate();const[email,setEmail]=useState('');const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const handleChange=e=>{setEmail(e.target.value);};const handleSubmit=async e=>{e.preventDefault();setLoading(true);setError(null);try{const data=await request('/password-reset',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email})});if(data.success){localStorage.setItem('canReset','1');navigate('/reset-password');}else{setError(data.message||'Ошибка восстановления пароля');}}catch(err){const errorMessage=err instanceof Error?err.message:'Unknown error';console.error('Ошибка восстановления пароля:',errorMessage);}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:styles.container,children:[/*#__PURE__*/_jsx(\"h1\",{className:styles.title,children:\"\\u0412\\u043E\\u0441\\u0441\\u0442\\u0430\\u043D\\u043E\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044F\"}),/*#__PURE__*/_jsxs(\"form\",{className:styles.form,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(Input,{type:\"email\",placeholder:\"\\u0423\\u043A\\u0430\\u0436\\u0438\\u0442\\u0435 e-mail\",name:\"email\",value:email,onChange:handleChange,required:true,onPointerEnterCapture:undefined,onPointerLeaveCapture:undefined}),/*#__PURE__*/_jsx(Button,{type:\"primary\",size:\"medium\",htmlType:\"submit\",disabled:loading,children:loading?'Отправка...':'Восстановить'}),error&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red',marginTop:16},children:error})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.links,children:/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0412\\u0441\\u043F\\u043E\\u043C\\u043D\\u0438\\u043B\\u0438 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C?\",' ',/*#__PURE__*/_jsx(Link,{to:\"/login\",className:styles.link,children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"})]})})]});};export default ForgotPasswordPage;","map":{"version":3,"names":["React","useState","Link","useNavigate","Button","Input","styles","request","jsx","_jsx","jsxs","_jsxs","ForgotPasswordPage","navigate","email","setEmail","loading","setLoading","error","setError","handleChange","e","target","value","handleSubmit","preventDefault","data","method","headers","body","JSON","stringify","success","localStorage","setItem","message","err","errorMessage","Error","console","className","container","children","title","form","onSubmit","type","placeholder","name","onChange","required","onPointerEnterCapture","undefined","onPointerLeaveCapture","size","htmlType","disabled","style","color","marginTop","links","to","link"],"sources":["/Users/antonkaliberov/Desktop/Обучение реакт/Спринт 1 /react-burger/src/pages/forgot-password-page.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport {\n  Button,\n  Input,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport styles from './auth-pages.module.css';\nimport { request } from '../utils/api';\n\nconst ForgotPasswordPage: React.FC = () => {\n  const navigate = useNavigate();\n  const [email, setEmail] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setEmail(e.target.value);\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n    try {\n      const data: { success: boolean; message?: string } = await request(\n        '/password-reset',\n        {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({ email }),\n        }\n      );\n      if (data.success) {\n        localStorage.setItem('canReset', '1');\n        navigate('/reset-password');\n      } else {\n        setError(data.message || 'Ошибка восстановления пароля');\n      }\n    } catch (err: unknown) {\n      const errorMessage = err instanceof Error ? err.message : 'Unknown error';\n      console.error('Ошибка восстановления пароля:', errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className={styles.container}>\n      <h1 className={styles.title}>Восстановление пароля</h1>\n      <form className={styles.form} onSubmit={handleSubmit}>\n        <Input\n          type='email'\n          placeholder='Укажите e-mail'\n          name='email'\n          value={email}\n          onChange={handleChange}\n          required\n          onPointerEnterCapture={undefined}\n          onPointerLeaveCapture={undefined}\n        />\n        <Button\n          type='primary'\n          size='medium'\n          htmlType='submit'\n          disabled={loading}\n        >\n          {loading ? 'Отправка...' : 'Восстановить'}\n        </Button>\n        {error && <div style={{ color: 'red', marginTop: 16 }}>{error}</div>}\n      </form>\n      <div className={styles.links}>\n        <p>\n          Вспомнили пароль?{' '}\n          <Link to='/login' className={styles.link}>\n            Войти\n          </Link>\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default ForgotPasswordPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}