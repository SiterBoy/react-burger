{"ast":null,"code":"import React,{useEffect}from'react';import{BrowserRouter as Router,Routes,Route,useLocation}from'react-router-dom';import{Provider}from'react-redux';import{DndProvider}from'react-dnd';import{HTML5Backend}from'react-dnd-html5-backend';import{store}from'../../store/store';import{useAppDispatch,useAppSelector}from'../../store/hooks';import{fetchIngredients}from'../../store/slices/ingredients-slice';import{init}from'../../store/slices/app-slice';import AppHeader from'../app-header/app-header';import HomePage from'../../pages/home-page';import LoginPage from'../../pages/login-page';import RegisterPage from'../../pages/register-page';import ForgotPasswordPage from'../../pages/forgot-password-page';import ResetPasswordPage from'../../pages/reset-password-page';import ProfilePage from'../../pages/profile-page';import IngredientDetailsPage from'../../pages/ingredient-details-page';import NotFoundPage from'../../pages/not-found-page';import ProtectedRouteElement from'../protected-route-element';import ResetPasswordGuard from'../reset-password-guard/reset-password-guard';import styles from'./app.module.css';import{IngredientModal}from'../ingredient-modal/ingredient-modal';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AppRoutes=()=>{const location=useLocation();const dispatch=useAppDispatch();const background=location.state&&location.state.background;const{loading}=useAppSelector(state=>state.user);const{initialized}=useAppSelector(state=>state.app);useEffect(()=>{dispatch(fetchIngredients());dispatch(init());},[dispatch]);// Показываем загрузку пока не завершится инициализация\nif(!initialized||loading){return/*#__PURE__*/_jsx(\"div\",{className:styles.app,children:/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'center',alignItems:'center',height:'100vh',fontSize:'18px'},children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:styles.app,children:[/*#__PURE__*/_jsx(AppHeader,{}),/*#__PURE__*/_jsxs(\"main\",{className:styles.appMain,children:[/*#__PURE__*/_jsxs(Routes,{location:background||location,children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(HomePage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(ProtectedRouteElement,{onlyUnAuth:true,children:/*#__PURE__*/_jsx(LoginPage,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(ProtectedRouteElement,{onlyUnAuth:true,children:/*#__PURE__*/_jsx(RegisterPage,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/forgot-password\",element:/*#__PURE__*/_jsx(ProtectedRouteElement,{onlyUnAuth:true,children:/*#__PURE__*/_jsx(ForgotPasswordPage,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/reset-password\",element:/*#__PURE__*/_jsx(ProtectedRouteElement,{onlyUnAuth:true,children:/*#__PURE__*/_jsx(ResetPasswordGuard,{children:/*#__PURE__*/_jsx(ResetPasswordPage,{})})})}),/*#__PURE__*/_jsx(Route,{path:\"/profile/*\",element:/*#__PURE__*/_jsx(ProtectedRouteElement,{children:/*#__PURE__*/_jsx(ProfilePage,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/ingredients/:id\",element:/*#__PURE__*/_jsx(IngredientDetailsPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(NotFoundPage,{})})]}),background&&/*#__PURE__*/_jsx(Routes,{children:/*#__PURE__*/_jsx(Route,{path:\"/ingredients/:id\",element:/*#__PURE__*/_jsx(IngredientModal,{})})})]})]});};const App=()=>{return/*#__PURE__*/_jsx(Provider,{store:store,children:/*#__PURE__*/_jsx(DndProvider,{backend:HTML5Backend,children:/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(AppRoutes,{})})})});};export default App;","map":{"version":3,"names":["React","useEffect","BrowserRouter","Router","Routes","Route","useLocation","Provider","DndProvider","HTML5Backend","store","useAppDispatch","useAppSelector","fetchIngredients","init","AppHeader","HomePage","LoginPage","RegisterPage","ForgotPasswordPage","ResetPasswordPage","ProfilePage","IngredientDetailsPage","NotFoundPage","ProtectedRouteElement","ResetPasswordGuard","styles","IngredientModal","jsx","_jsx","jsxs","_jsxs","AppRoutes","location","dispatch","background","state","loading","user","initialized","app","className","children","style","display","justifyContent","alignItems","height","fontSize","appMain","path","element","onlyUnAuth","App","backend"],"sources":["/Users/antonkaliberov/Desktop/Обучение реакт/Спринт 1 /react-burger/src/components/app/app.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport {\n  BrowserRouter as Router,\n  Routes,\n  Route,\n  useLocation,\n} from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport { store } from '../../store/store';\nimport { useAppDispatch, useAppSelector } from '../../store/hooks';\nimport { fetchIngredients } from '../../store/slices/ingredients-slice';\nimport { init } from '../../store/slices/app-slice';\nimport { RootState } from '../../store/types';\nimport AppHeader from '../app-header/app-header';\nimport HomePage from '../../pages/home-page';\nimport LoginPage from '../../pages/login-page';\nimport RegisterPage from '../../pages/register-page';\nimport ForgotPasswordPage from '../../pages/forgot-password-page';\nimport ResetPasswordPage from '../../pages/reset-password-page';\nimport ProfilePage from '../../pages/profile-page';\nimport IngredientDetailsPage from '../../pages/ingredient-details-page';\nimport NotFoundPage from '../../pages/not-found-page';\nimport ProtectedRouteElement from '../protected-route-element';\nimport ResetPasswordGuard from '../reset-password-guard/reset-password-guard';\nimport styles from './app.module.css';\nimport { IngredientModal } from '../ingredient-modal/ingredient-modal';\n\nconst AppRoutes = () => {\n  const location = useLocation();\n  const dispatch = useAppDispatch();\n  const background = location.state && location.state.background;\n  const { loading } = useAppSelector((state: RootState) => state.user);\n  const { initialized } = useAppSelector((state: RootState) => state.app);\n\n  useEffect(() => {\n    dispatch(fetchIngredients());\n    dispatch(init());\n  }, [dispatch]);\n\n  // Показываем загрузку пока не завершится инициализация\n  if (!initialized || loading) {\n    return (\n      <div className={styles.app}>\n        <div\n          style={{\n            display: 'flex',\n            justifyContent: 'center',\n            alignItems: 'center',\n            height: '100vh',\n            fontSize: '18px',\n          }}\n        >\n          Загрузка...\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={styles.app}>\n      <AppHeader />\n      <main className={styles.appMain}>\n        <Routes location={background || location}>\n          <Route path='/' element={<HomePage />} />\n          <Route\n            path='/login'\n            element={\n              <ProtectedRouteElement onlyUnAuth>\n                <LoginPage />\n              </ProtectedRouteElement>\n            }\n          />\n          <Route\n            path='/register'\n            element={\n              <ProtectedRouteElement onlyUnAuth>\n                <RegisterPage />\n              </ProtectedRouteElement>\n            }\n          />\n          <Route\n            path='/forgot-password'\n            element={\n              <ProtectedRouteElement onlyUnAuth>\n                <ForgotPasswordPage />\n              </ProtectedRouteElement>\n            }\n          />\n          <Route\n            path='/reset-password'\n            element={\n              <ProtectedRouteElement onlyUnAuth>\n                <ResetPasswordGuard>\n                  <ResetPasswordPage />\n                </ResetPasswordGuard>\n              </ProtectedRouteElement>\n            }\n          />\n          <Route\n            path='/profile/*'\n            element={\n              <ProtectedRouteElement>\n                <ProfilePage />\n              </ProtectedRouteElement>\n            }\n          />\n          <Route path='/ingredients/:id' element={<IngredientDetailsPage />} />\n          <Route path='*' element={<NotFoundPage />} />\n        </Routes>\n\n        {background && (\n          <Routes>\n            <Route path='/ingredients/:id' element={<IngredientModal />} />\n          </Routes>\n        )}\n      </main>\n    </div>\n  );\n};\n\nconst App: React.FC = () => {\n  return (\n    <Provider store={store}>\n      <DndProvider backend={HTML5Backend}>\n        <Router>\n          <AppRoutes />\n        </Router>\n      </DndProvider>\n    </Provider>\n  );\n};\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}