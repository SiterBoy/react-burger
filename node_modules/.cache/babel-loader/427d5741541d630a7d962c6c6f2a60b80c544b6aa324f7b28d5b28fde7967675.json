{"ast":null,"code":"import{createSlice,createAsyncThunk}from'@reduxjs/toolkit';import{request}from'../../utils/api';const initialState={orderNumber:null,loading:false,error:null};export const createOrder=createAsyncThunk('order/createOrder',async ingredientIds=>{const data=await request('/orders',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({ingredients:ingredientIds})});return data.order.number;});const orderSlice=createSlice({name:'order',initialState,reducers:{clearOrder:state=>{state.orderNumber=null;state.error=null;}},extraReducers:builder=>{builder.addCase(createOrder.pending,state=>{state.loading=true;state.error=null;}).addCase(createOrder.fulfilled,(state,action)=>{state.loading=false;state.orderNumber=action.payload;}).addCase(createOrder.rejected,(state,action)=>{state.loading=false;state.error=action.error.message||'Произошла ошибка при создании заказа';});}});export const{clearOrder}=orderSlice.actions;export default orderSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","request","initialState","orderNumber","loading","error","createOrder","ingredientIds","data","method","headers","body","JSON","stringify","ingredients","order","number","orderSlice","name","reducers","clearOrder","state","extraReducers","builder","addCase","pending","fulfilled","action","payload","rejected","message","actions","reducer"],"sources":["/Users/antonkaliberov/Desktop/Обучение реакт/Спринт 1 /react-burger/src/store/slices/order-slice.ts"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport { request } from '../../utils/api';\n\ninterface OrderState {\n  orderNumber: number | null;\n  loading: boolean;\n  error: string | null;\n}\n\nconst initialState: OrderState = {\n  orderNumber: null,\n  loading: false,\n  error: null,\n};\n\nexport const createOrder = createAsyncThunk(\n  'order/createOrder',\n  async (ingredientIds: string[]) => {\n    const data = await request<{ order: { number: number } }>('/orders', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ ingredients: ingredientIds }),\n    });\n    return data.order.number;\n  }\n);\n\nconst orderSlice = createSlice({\n  name: 'order',\n  initialState,\n  reducers: {\n    clearOrder: state => {\n      state.orderNumber = null;\n      state.error = null;\n    },\n  },\n  extraReducers: builder => {\n    builder\n      .addCase(createOrder.pending, state => {\n        state.loading = true;\n        state.error = null;\n      })\n      .addCase(createOrder.fulfilled, (state, action) => {\n        state.loading = false;\n        state.orderNumber = action.payload;\n      })\n      .addCase(createOrder.rejected, (state, action) => {\n        state.loading = false;\n        state.error =\n          action.error.message || 'Произошла ошибка при создании заказа';\n      });\n  },\n});\n\nexport const { clearOrder } = orderSlice.actions;\nexport default orderSlice.reducer;\n"],"mappings":"AAAA,OAASA,WAAW,CAAEC,gBAAgB,KAAQ,kBAAkB,CAChE,OAASC,OAAO,KAAQ,iBAAiB,CAQzC,KAAM,CAAAC,YAAwB,CAAG,CAC/BC,WAAW,CAAE,IAAI,CACjBC,OAAO,CAAE,KAAK,CACdC,KAAK,CAAE,IACT,CAAC,CAED,MAAO,MAAM,CAAAC,WAAW,CAAGN,gBAAgB,CACzC,mBAAmB,CACnB,KAAO,CAAAO,aAAuB,EAAK,CACjC,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAP,OAAO,CAAgC,SAAS,CAAE,CACnEQ,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEC,WAAW,CAAEP,aAAc,CAAC,CACrD,CAAC,CAAC,CACF,MAAO,CAAAC,IAAI,CAACO,KAAK,CAACC,MAAM,CAC1B,CACF,CAAC,CAED,KAAM,CAAAC,UAAU,CAAGlB,WAAW,CAAC,CAC7BmB,IAAI,CAAE,OAAO,CACbhB,YAAY,CACZiB,QAAQ,CAAE,CACRC,UAAU,CAAEC,KAAK,EAAI,CACnBA,KAAK,CAAClB,WAAW,CAAG,IAAI,CACxBkB,KAAK,CAAChB,KAAK,CAAG,IAAI,CACpB,CACF,CAAC,CACDiB,aAAa,CAAEC,OAAO,EAAI,CACxBA,OAAO,CACJC,OAAO,CAAClB,WAAW,CAACmB,OAAO,CAAEJ,KAAK,EAAI,CACrCA,KAAK,CAACjB,OAAO,CAAG,IAAI,CACpBiB,KAAK,CAAChB,KAAK,CAAG,IAAI,CACpB,CAAC,CAAC,CACDmB,OAAO,CAAClB,WAAW,CAACoB,SAAS,CAAE,CAACL,KAAK,CAAEM,MAAM,GAAK,CACjDN,KAAK,CAACjB,OAAO,CAAG,KAAK,CACrBiB,KAAK,CAAClB,WAAW,CAAGwB,MAAM,CAACC,OAAO,CACpC,CAAC,CAAC,CACDJ,OAAO,CAAClB,WAAW,CAACuB,QAAQ,CAAE,CAACR,KAAK,CAAEM,MAAM,GAAK,CAChDN,KAAK,CAACjB,OAAO,CAAG,KAAK,CACrBiB,KAAK,CAAChB,KAAK,CACTsB,MAAM,CAACtB,KAAK,CAACyB,OAAO,EAAI,sCAAsC,CAClE,CAAC,CAAC,CACN,CACF,CAAC,CAAC,CAEF,MAAO,MAAM,CAAEV,UAAW,CAAC,CAAGH,UAAU,CAACc,OAAO,CAChD,cAAe,CAAAd,UAAU,CAACe,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}