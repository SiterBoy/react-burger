{"ast":null,"code":"import{createSlice}from'@reduxjs/toolkit';import{v4 as uuidv4}from'uuid';const initialState={bun:null,ingredients:[]};const constructorSlice=createSlice({name:'burgerConstructor',initialState,reducers:{addIngredient:{reducer:(state,action)=>{if(action.payload.type==='bun'){state.bun=action.payload;}else{state.ingredients.push(action.payload);}},prepare:ingredient=>{return{payload:{...ingredient,uuid:uuidv4()}};}},removeIngredient:(state,action)=>{if(state.bun&&state.bun._id===action.payload){state.bun=null;}else{state.ingredients=state.ingredients.filter(ingredient=>ingredient.uuid!==action.payload);}},moveIngredient:(state,action)=>{const{dragIndex,hoverIndex}=action.payload;const draggedItem=state.ingredients[dragIndex];state.ingredients.splice(dragIndex,1);state.ingredients.splice(hoverIndex,0,draggedItem);},clearConstructor:state=>{state.bun=null;state.ingredients=[];}}});export const{addIngredient,removeIngredient,moveIngredient,clearConstructor}=constructorSlice.actions;export default constructorSlice.reducer;","map":{"version":3,"names":["createSlice","v4","uuidv4","initialState","bun","ingredients","constructorSlice","name","reducers","addIngredient","reducer","state","action","payload","type","push","prepare","ingredient","uuid","removeIngredient","_id","filter","moveIngredient","dragIndex","hoverIndex","draggedItem","splice","clearConstructor","actions"],"sources":["/Users/antonkaliberov/Desktop/Обучение реакт/Спринт 1 /react-burger/src/store/slices/constructor-slice.ts"],"sourcesContent":["import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { v4 as uuidv4 } from 'uuid';\nimport IIngredientData from '../../types/interfaces/ingridient-data.interface';\n\ninterface IConstructorIngredient extends IIngredientData {\n  uuid: string;\n}\n\ninterface ConstructorState {\n  bun: IIngredientData | null;\n  ingredients: IConstructorIngredient[];\n}\n\nconst initialState: ConstructorState = {\n  bun: null,\n  ingredients: [],\n};\n\nconst constructorSlice = createSlice({\n  name: 'burgerConstructor',\n  initialState,\n  reducers: {\n    addIngredient: {\n      reducer: (state, action: PayloadAction<IConstructorIngredient>) => {\n        if (action.payload.type === 'bun') {\n          state.bun = action.payload;\n        } else {\n          state.ingredients.push(action.payload);\n        }\n      },\n      prepare: (ingredient: IIngredientData) => {\n        return {\n          payload: {\n            ...ingredient,\n            uuid: uuidv4(),\n          },\n        };\n      },\n    },\n    removeIngredient: (state, action: PayloadAction<string>) => {\n      if (state.bun && state.bun._id === action.payload) {\n        state.bun = null;\n      } else {\n        state.ingredients = state.ingredients.filter(\n          ingredient => ingredient.uuid !== action.payload\n        );\n      }\n    },\n    moveIngredient: (\n      state,\n      action: PayloadAction<{ dragIndex: number; hoverIndex: number }>\n    ) => {\n      const { dragIndex, hoverIndex } = action.payload;\n      const draggedItem = state.ingredients[dragIndex];\n      state.ingredients.splice(dragIndex, 1);\n      state.ingredients.splice(hoverIndex, 0, draggedItem);\n    },\n    clearConstructor: state => {\n      state.bun = null;\n      state.ingredients = [];\n    },\n  },\n});\n\nexport const {\n  addIngredient,\n  removeIngredient,\n  moveIngredient,\n  clearConstructor,\n} = constructorSlice.actions;\n\nexport default constructorSlice.reducer;\n"],"mappings":"AAAA,OAASA,WAAW,KAAuB,kBAAkB,CAC7D,OAASC,EAAE,GAAI,CAAAC,MAAM,KAAQ,MAAM,CAYnC,KAAM,CAAAC,YAA8B,CAAG,CACrCC,GAAG,CAAE,IAAI,CACTC,WAAW,CAAE,EACf,CAAC,CAED,KAAM,CAAAC,gBAAgB,CAAGN,WAAW,CAAC,CACnCO,IAAI,CAAE,mBAAmB,CACzBJ,YAAY,CACZK,QAAQ,CAAE,CACRC,aAAa,CAAE,CACbC,OAAO,CAAEA,CAACC,KAAK,CAAEC,MAA6C,GAAK,CACjE,GAAIA,MAAM,CAACC,OAAO,CAACC,IAAI,GAAK,KAAK,CAAE,CACjCH,KAAK,CAACP,GAAG,CAAGQ,MAAM,CAACC,OAAO,CAC5B,CAAC,IAAM,CACLF,KAAK,CAACN,WAAW,CAACU,IAAI,CAACH,MAAM,CAACC,OAAO,CAAC,CACxC,CACF,CAAC,CACDG,OAAO,CAAGC,UAA2B,EAAK,CACxC,MAAO,CACLJ,OAAO,CAAE,CACP,GAAGI,UAAU,CACbC,IAAI,CAAEhB,MAAM,CAAC,CACf,CACF,CAAC,CACH,CACF,CAAC,CACDiB,gBAAgB,CAAEA,CAACR,KAAK,CAAEC,MAA6B,GAAK,CAC1D,GAAID,KAAK,CAACP,GAAG,EAAIO,KAAK,CAACP,GAAG,CAACgB,GAAG,GAAKR,MAAM,CAACC,OAAO,CAAE,CACjDF,KAAK,CAACP,GAAG,CAAG,IAAI,CAClB,CAAC,IAAM,CACLO,KAAK,CAACN,WAAW,CAAGM,KAAK,CAACN,WAAW,CAACgB,MAAM,CAC1CJ,UAAU,EAAIA,UAAU,CAACC,IAAI,GAAKN,MAAM,CAACC,OAC3C,CAAC,CACH,CACF,CAAC,CACDS,cAAc,CAAEA,CACdX,KAAK,CACLC,MAAgE,GAC7D,CACH,KAAM,CAAEW,SAAS,CAAEC,UAAW,CAAC,CAAGZ,MAAM,CAACC,OAAO,CAChD,KAAM,CAAAY,WAAW,CAAGd,KAAK,CAACN,WAAW,CAACkB,SAAS,CAAC,CAChDZ,KAAK,CAACN,WAAW,CAACqB,MAAM,CAACH,SAAS,CAAE,CAAC,CAAC,CACtCZ,KAAK,CAACN,WAAW,CAACqB,MAAM,CAACF,UAAU,CAAE,CAAC,CAAEC,WAAW,CAAC,CACtD,CAAC,CACDE,gBAAgB,CAAEhB,KAAK,EAAI,CACzBA,KAAK,CAACP,GAAG,CAAG,IAAI,CAChBO,KAAK,CAACN,WAAW,CAAG,EAAE,CACxB,CACF,CACF,CAAC,CAAC,CAEF,MAAO,MAAM,CACXI,aAAa,CACbU,gBAAgB,CAChBG,cAAc,CACdK,gBACF,CAAC,CAAGrB,gBAAgB,CAACsB,OAAO,CAE5B,cAAe,CAAAtB,gBAAgB,CAACI,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}